DROP TABLE IF EXISTS PRAVA_SDILENI
;
DROP TABLE IF EXISTS KALENDAR
;
DROP TABLE IF EXISTS UZIVATEL
;
DROP TABLE IF EXISTS SKUPINA_UDALOSTI
;

CREATE TABLE PRAVA_SDILENI
(
	OID____ INTEGER NOT NULL,
	OID_UZI INTEGER NOT NULL,
	OID_SKU INTEGER NOT NULL,
	PRIMARY KEY (OID____),
	KEY (OID_SKU),
	KEY (OID_UZI)
) 
;


CREATE TABLE KALENDAR
(
	OID____ INTEGER NOT NULL,
	TYP_ZOB INTEGER NOT NULL,
	OID_UZI INTEGER NOT NULL,
	PRIMARY KEY (OID____),
	UNIQUE (OID_UZI),
	KEY (OID_UZI)
) 
;


CREATE TABLE UZIVATEL
(
	OID____ INTEGER NOT NULL,
	JMENO__ VARCHAR(30) NOT NULL,
	PRIJMENI VARCHAR(30) NOT NULL,
	UZIV_JM VARCHAR(50) NOT NULL,
	HESLO__ VARCHAR(50) NOT NULL,
	PRIMARY KEY (OID____),
	UNIQUE (UZIV_JM)
) 
;


CREATE TABLE SKUPINA_UDALOSTI
(
	OID____ INTEGER NOT NULL,
	NAZEV__ VARCHAR(20) NOT NULL,
	BARVA__ VARCHAR(25) NOT NULL,
	ZOBRAZ_ INTEGER NOT NULL,
	AKTIV__ INTEGER NOT NULL,
	OID_KAL INTEGER NOT NULL,
	OID_SKU INTEGER,
	PRIMARY KEY (OID____),
	KEY (OID_KAL),
	KEY (OID_SKU)
) 
;






ALTER TABLE PRAVA_SDILENI ADD CONSTRAINT FK_PRAVA_SDILENI_SKUPINA_UDALOSTI 
	FOREIGN KEY (OID_SKU) REFERENCES SKUPINA_UDALOSTI (OID____)
;

ALTER TABLE PRAVA_SDILENI ADD CONSTRAINT FK_PRAVA_SDILENI_UZIVATEL 
	FOREIGN KEY (OID_UZI) REFERENCES UZIVATEL (OID____)
;

ALTER TABLE KALENDAR ADD CONSTRAINT FK_KALENDAR_UZIVATEL 
	FOREIGN KEY (OID_UZI) REFERENCES UZIVATEL (OID____)
;

ALTER TABLE SKUPINA_UDALOSTI ADD CONSTRAINT FK_SKUPINA_UDALOSTI_KALENDAR 
	FOREIGN KEY (OID_KAL) REFERENCES KALENDAR (OID____)
;

ALTER TABLE SKUPINA_UDALOSTI ADD CONSTRAINT FK_SKUPINA_UDALOSTI_SKUPINA_UDALOSTI 
	FOREIGN KEY (OID_SKU) REFERENCES SKUPINA_UDALOSTI (OID____)
;

DROP TABLE IF EXISTS UDALOST
;
CREATE TABLE UDALOST
(
	OID____ INTEGER NOT NULL,
	NAZEV__ VARCHAR(20) NOT NULL,
	POPIS__ VARCHAR(255),
	DAT_OD_ DATETIME NOT NULL,
	DAT_DO_ DATETIME,
	OID_SKU INTEGER NOT NULL,
	PRIMARY KEY (OID____),
	KEY (OID_SKU)
) 
;


ALTER TABLE UDALOST ADD CONSTRAINT FK_UDALOST_SKUPINA_UDALOSTI 
	FOREIGN KEY (OID_SKU) REFERENCES SKUPINA_UDALOSTI (OID____)
;

