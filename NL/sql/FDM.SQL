DROP TABLE IF EXISTS UDALOST
;
DROP TABLE IF EXISTS PRIPOJENA_SKUPINA_UDALOSTI
;
DROP TABLE IF EXISTS PRAVA_SDILENI
;
DROP TABLE IF EXISTS KALENDAR
;
DROP TABLE IF EXISTS UZIVATEL
;
DROP TABLE IF EXISTS SKUPINA_UDALOSTI
;

CREATE TABLE UDALOST
(
	OID____ INTEGER NOT NULL,
	NAZEV__ VARCHAR(20),
	POPIS__ VARCHAR(255),
	DAT_OD_ DATETIME,
	DAT_DO_ DATETIME,
	OID_SKU INTEGER,
	PRIMARY KEY (OID____),
	KEY (OID_SKU)
) 
;


CREATE TABLE PRIPOJENA_SKUPINA_UDALOSTI
(
	OID____ INTEGER NOT NULL,
	NAZEV__ VARCHAR(20),
	BARVA__ VARCHAR(25),
	ZOBRAZ_ INTEGER,
	OID_SKU INTEGER,
	OID_KAL INTEGER,
	PRIMARY KEY (OID____),
	KEY (OID_KAL),
	KEY (OID_SKU)
) 
;


CREATE TABLE PRAVA_SDILENI
(
	OID____ INTEGER NOT NULL,
	OID_UZI INTEGER,
	OID_SKU INTEGER,
	PRIMARY KEY (OID____),
	KEY (OID_SKU),
	KEY (OID_UZI)
) 
;


CREATE TABLE KALENDAR
(
	OID____ INTEGER NOT NULL,
	TYP_ZOB INTEGER,
	OID_UZI INTEGER,
	PRIMARY KEY (OID____),
	KEY (OID_UZI)
) 
;


CREATE TABLE UZIVATEL
(
	OID____ INTEGER NOT NULL,
	JMENO__ VARCHAR(30),
	PRIJMENI VARCHAR(30),
	UZIV_JM VARCHAR(50),
	HESLO__ VARCHAR(50),
	PRIMARY KEY (OID____)
) 
;


CREATE TABLE SKUPINA_UDALOSTI
(
	OID____ INTEGER NOT NULL,
	NAZEV__ VARCHAR(20) NOT NULL,
	PRIMARY KEY (OID____)
) 
;






ALTER TABLE UDALOST ADD CONSTRAINT FK_UDALOST_SKUPINA_UDALOSTI 
	FOREIGN KEY (OID_SKU) REFERENCES SKUPINA_UDALOSTI (OID____)
;

ALTER TABLE PRIPOJENA_SKUPINA_UDALOSTI ADD CONSTRAINT FK_PRIPOJENA_SKUPINA_UDALOSTI_KALENDAR 
	FOREIGN KEY (OID_KAL) REFERENCES KALENDAR (OID____)
;

ALTER TABLE PRIPOJENA_SKUPINA_UDALOSTI ADD CONSTRAINT FK_PRIPOJENA_SKUPINA_UDALOSTI_SKUPINA_UDALOSTI 
	FOREIGN KEY (OID_SKU) REFERENCES SKUPINA_UDALOSTI (OID____)
;

ALTER TABLE PRAVA_SDILENI ADD CONSTRAINT FK_PRAVA_SDILENI_SKUPINA_UDALOSTI 
	FOREIGN KEY (OID_SKU) REFERENCES SKUPINA_UDALOSTI (OID____)
;

ALTER TABLE PRAVA_SDILENI ADD CONSTRAINT FK_PRAVA_SDILENI_UZIVATEL 
	FOREIGN KEY (OID_UZI) REFERENCES UZIVATEL (OID____)
;

ALTER TABLE KALENDAR ADD CONSTRAINT FK_KALENDAR_UZIVATEL 
	FOREIGN KEY (OID_UZI) REFERENCES UZIVATEL (OID____)
;
